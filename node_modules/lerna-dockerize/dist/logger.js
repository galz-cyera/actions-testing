"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getLogger = void 0;
const winston_1 = require("winston");
const options_1 = require("./options");
let logger;
function getLogger() {
    if (!logger) {
        const formatMessage = (info) => `[${info.timestamp}] ${info.level}: ${info.message}`;
        const formatError = (info) => `${formatMessage(info)}\n\n${info.stack}\n`;
        logger = (0, winston_1.createLogger)({
            level: (0, options_1.getOptions)().logLevel,
            format: winston_1.format.combine(winston_1.format.timestamp(), winston_1.format.colorize(), winston_1.format.printf((info) => {
                if (info instanceof Error) {
                    return formatError(info);
                }
                else {
                    return formatMessage(info);
                }
            })),
        });
        if ((0, options_1.getOptions)().logConsole) {
            logger = logger.add(new winston_1.transports.Console());
        }
    }
    return logger;
}
exports.getLogger = getLogger;
//# sourceMappingURL=logger.js.map