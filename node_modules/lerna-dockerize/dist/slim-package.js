"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.slimPackage = void 0;
const fs_1 = require("fs");
const logger_1 = require("./logger");
async function slimPackage(file) {
    (0, logger_1.getLogger)().info(`Slimming ${file}.`);
    const packageJsonRaw = (await fs_1.promises.readFile(file)).toString();
    const packageJson = JSON.parse(packageJsonRaw);
    const result = {
        name: packageJson.name,
        version: packageJson.version,
        dependencies: packageJson.dependencies,
        devDependencies: packageJson.devDependencies,
        peerDependencies: packageJson.peerDependencies,
    };
    const slimPackageFileName = file.replace('package.json', 'package-slim.json');
    await fs_1.promises.writeFile(slimPackageFileName, JSON.stringify(result, undefined, 4));
    return slimPackageFileName;
}
exports.slimPackage = slimPackage;
//# sourceMappingURL=slim-package.js.map